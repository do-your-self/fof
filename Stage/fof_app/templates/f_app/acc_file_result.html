{% extends "main.html" %}
{% block manager %}
{% endblock %}

{% block content %}
<div class="row">
    {% if error_list | length == 0 %}
    <div class="x_panel fixed_height_390">
        <div class="x_title">
          <div class="col-md-10">
            <h2>预览净值</h2>
          </div>
          <div class="clearfix"></div>
        </div>
        <div class="col-md-12" id="myTabContent">
        </div>
        <div class="col-md-1 col-md-offset-5">
          <form method="POST" action="{{ url_for('f_app.confirm_acc') }}"  enctype=multipart/form-data>
            <input type="text" name="file_path" style="display:none;" value="{{ file_path }}">
            <button class="btn btn-primary" type="submit" id="upload">提交</button>
          </form>
        </div>
        <div class="col-md-1">
          <a class="btn btn-default" href="{{ url_for('f_app.import_nav')}}">返回</a>
        </div>
    </div>
    {% else %}
      <div class="x_title">
        <div class="col-md-11">
          <h2>预览净值</h2>
        </div>                    
        <div class="col-md-1">
          <a class="btn btn-default" href="{{ url_for('f_app.import_nav')}}">返回</a>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="col-md-4 col-md-offset-4" style="text-align: center;margin-top:100px;">
        {% for i in error_list %}
          <p>{{i}}</p>
        {% endfor %}
      </div>  
    {% endif %}
    
 </div>

{% endblock %}

{% block script %}
  <script>
  var  data  = {{ data_dict |tojson }};
  $("#myTabContent").append('<table class="table table-bordered" id="table" width="100%" style="text-align:center;"></table>');
  var table1=$('#table').DataTable({
      "info":false,
      "paging": false,
      "columns": [
        {'title':'日期',
          'data':'日期'},
        {'title':'基金代码',
          'data':'基金代码'},
        {'title':'基金名称',
          'data':'基金名称'},
        {'title':'单位净值',
          'data':'单位净值'},
        {'title':'累计净值',
          'data':'累计净值'},
        {'title':'份额分红',
          'data':'份额分红'},
        {'title':'金额分红',
          'data':'金额分红'}
      ],
      'data':data,
      "language": {
          "lengthMenu": "每页 _MENU_ 条记录",
          "zeroRecords": "没有找到记录",
          "info": "第 _PAGE_ 页 ( 总共 _PAGES_ 页 )",
          "infoEmpty": "无记录",
          "search": "搜索：",
          "infoFiltered": "(从 _MAX_ 条记录过滤)",
          "paginate": {
              "previous": "上一页",
              "next": "下一页"
          }
      },
      "order": [[2, 'asc']],
      "displayLength": 10
  });
  </script>

{% endblock %}
